<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="keywords" content="music, ai, diagnostics">
        <meta name="description" content="Learning music is hard, personal and expensive. Kena is an AI-based music practice destination helping you through every step of your journey.">       
        <title>Kena.AI</title>

     
    </head>
    <body>
        <button id='startButton' type='button'>start</button>

        <button id='stopButton' type='button'>stop</button>





        <!-- jquery -->
        <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>

        <script>
          $(document).ready(function(){
            console.log('hi');

            // ref: https://youtu.be/K6L38xk2rkk

            // these are the parameters I want to use
            const constraintObj = {
                audio: true,
                // video: false
            }

            navigator.mediaDevices.getUserMedia(constraintObj).then(function(mediaStreamObj){
                // 1.connect the media stram to the audio el
                // we may not need it for audio

                // add listeners for saving audio/video
                const start = document.getElementById('startButton');
                const stop = document.getElementById('stopButton');
                // this is media stream recording api
                const mediaRecorder = new MediaRecorder(mediaStreamObj);
                // this is where i'm going to put data
                const chunks = [];

                start.addEventListener('click', function(e){
                    mediaRecorder.start();
                    console.log(mediaRecorder.state);
                });
                stop.addEventListener('click', function(e){
                    mediaRecorder.stop();
                    console.log(mediaRecorder.state);
                });
                // this is how we feed array of chunks
                mediaRecorder.ondataavailable = function(e){
                    // when e.data is ready, push to chunks
                    // chunks.push(e.data);
                }
                //
                mediaRecorder.onstop = function(e){
                    // blob object represents a file-like object of raw data
                    // const blob = new Blob(chunks, {'type': 'video/mp4'});
                    // chunks = [];
                    // const videoURL = window.URL.createObjectURL(blob);
                    // vidSave.src = videoURL;
                }

            })
            .catch(function(err){
                // user didn't allow it
                console.log(err.name, err.message);
            });

          })
           
        </script>

    </body>
</html>
